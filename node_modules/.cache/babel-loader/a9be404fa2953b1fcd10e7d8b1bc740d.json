{"ast":null,"code":"import { REGISTERUSER, REGISTERBUSINESS, RECOVERYKEY, USERLOGIN, USERLOGINGOOGLE } from \"./action-types\";\nimport axios from 'axios';\n\n//Registramos usuario \nexport const register_user = dataquery => {\n  return async dispatch => {\n    try {\n      // alert(\"Entro al dispach\")\n      const userData = {\n        username: dataquery.username,\n        email: dataquery.email,\n        password: dataquery.password\n      };\n      //  alert (\"usuario \"+userData.username)\n      const endpoint = 'http://localhost:5000/users/create';\n      const response = await axios.post(endpoint, userData);\n      const {\n        id,\n        username,\n        email,\n        password,\n        google_id,\n        role_id\n      } = response.data;\n\n      // alert(\"El data es \" + {id, username, email, password, google_id, role_id })\n\n      const userDatauser = {\n        id,\n        username,\n        email,\n        password,\n        google_id,\n        role_id\n      };\n      // console.log(\"Datos encontrados\", JSON.stringify(userDatauser));\n      dispatch({\n        type: REGISTERUSER,\n        payload: userDatauser\n      });\n    } catch (error) {\n      console.log(\"Error al enviar la información\", error.message);\n    }\n  };\n};\n\n//Registramos empresa \nexport const register_business = dataquery => {\n  return async dispatch => {\n    try {\n      const endpoint = 'http://localhost:3001/atleticos/register';\n      const response = await axios.post(endpoint, dataquery);\n      const userData = response.data;\n      console.log(\"Datos encontrados\", JSON.stringify(userData));\n      if (userData && userData.save === 'yes') {\n        dispatch({\n          type: REGISTERBUSINESS,\n          payload: userData\n        });\n      } else {\n        alert('Error al registrar el usuario');\n      }\n    } catch (error) {\n      console.log(\"Error al enviar la información\", error.message);\n    }\n  };\n};\n\n//REcuperar contraseña\n\nexport const recovery_key_user = dataquery => {\n  return async dispatch => {\n    try {\n      const endpoint = 'http://localhost:3001/atleticos/register';\n      const response = await axios.post(endpoint, dataquery);\n      const userData = response.data;\n      console.log(\"Datos encontrados\", JSON.stringify(userData));\n      if (userData && userData.save === 'yes') {\n        dispatch({\n          type: RECOVERYKEY,\n          payload: userData\n        });\n      } else {\n        alert('Error al registrar el usuario');\n      }\n    } catch (error) {\n      console.log(\"Error al enviar la información\", error.message);\n    }\n  };\n};\n\n//Loguear usuario\nexport const login_User = dataquery => {\n  return async dispatch => {\n    try {\n      const userData = {\n        email: dataquery.emailOrPhone,\n        password: dataquery.password\n      };\n      const params = new URLSearchParams(userData).toString();\n      alert(\"Lo que tienen el username en el anme es \" + userData.username);\n      const endpoint = 'http://localhost:5000/users';\n      const response = await axios.get(`${endpoint}?${params}`);\n      const userDatauser = response[0];\n      console.log(\"lo que tengo de retorno \" + userDatauser);\n      console.log(\"lo que tengo de retorno \" + JSON.stringify(userDatauser));\n      //const userDatauser= {id, username, email, password, google_id, role_id }\n\n      dispatch({\n        type: USERLOGIN,\n        payload: userDatauser\n      });\n    } catch (error) {\n      console.log(\"Error al enviar mensaje\", error.message);\n    }\n  };\n};\n\n//Loguear usuario\nexport const login_User_Google = dataquery => {\n  return async dispatch => {\n    try {\n      const endpoint = 'http://localhost:3001/atleticos/recuperarkey';\n      const response = await axios.post(endpoint, dataquery);\n      dispatch({\n        type: USERLOGINGOOGLE,\n        payload: response\n      });\n    } catch (error) {\n      console.log(\"Error al enviar mensaje\", error.message);\n    }\n  };\n};","map":{"version":3,"names":["REGISTERUSER","REGISTERBUSINESS","RECOVERYKEY","USERLOGIN","USERLOGINGOOGLE","axios","register_user","dataquery","dispatch","userData","username","email","password","endpoint","response","post","id","google_id","role_id","data","userDatauser","type","payload","error","console","log","message","register_business","JSON","stringify","save","alert","recovery_key_user","login_User","emailOrPhone","params","URLSearchParams","toString","get","login_User_Google"],"sources":["C:/Users/Luis Buelvas/Desktop/Carpeta_PI/ProyectoFinal/FastFoodFront/src/Redux/actions.js"],"sourcesContent":["import { REGISTERUSER, REGISTERBUSINESS, RECOVERYKEY, USERLOGIN, USERLOGINGOOGLE } from \"./action-types\"\r\nimport axios from 'axios'\r\n\r\n\r\n//Registramos usuario \r\nexport const register_user = (dataquery) => {\r\n    return async (dispatch) => {\r\n        try {\r\n           // alert(\"Entro al dispach\")\r\n            const userData = {\r\n                                username:dataquery.username,\r\n                                email:dataquery.email,\r\n                                password:dataquery.password\r\n            }\r\n          //  alert (\"usuario \"+userData.username)\r\n            const endpoint = 'http://localhost:5000/users/create';\r\n            \r\n            const response = await axios.post(endpoint, userData);\r\n            const {id, username, email, password, google_id, role_id } =response.data\r\n\r\n           // alert(\"El data es \" + {id, username, email, password, google_id, role_id })\r\n\r\n           \r\n\r\n            const userDatauser= {id, username, email, password, google_id, role_id }\r\n           // console.log(\"Datos encontrados\", JSON.stringify(userDatauser));\r\n            dispatch({\r\n                type: REGISTERUSER,\r\n                payload: userDatauser,\r\n            });\r\n      \r\n        } catch (error) {\r\n            console.log(\"Error al enviar la información\", error.message);\r\n        }\r\n    };\r\n};\r\n\r\n//Registramos empresa \r\nexport const register_business = (dataquery) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const endpoint = 'http://localhost:3001/atleticos/register';\r\n            const response = await axios.post(endpoint, dataquery);\r\n            const userData = response.data;\r\n\r\n\r\n\r\n            console.log(\"Datos encontrados\", JSON.stringify(userData));\r\n\r\n            if (userData && userData.save === 'yes') {\r\n\r\n            dispatch({\r\n                type: REGISTERBUSINESS,\r\n                payload: userData,\r\n            });\r\n        }else{\r\n            alert('Error al registrar el usuario');\r\n        }\r\n        } catch (error) {\r\n            console.log(\"Error al enviar la información\", error.message);\r\n        }\r\n    };\r\n};\r\n\r\n\r\n//REcuperar contraseña\r\n\r\nexport const recovery_key_user = (dataquery) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const endpoint = 'http://localhost:3001/atleticos/register';\r\n            const response = await axios.post(endpoint, dataquery);\r\n            const userData = response.data;\r\n\r\n\r\n\r\n            console.log(\"Datos encontrados\", JSON.stringify(userData));\r\n\r\n            if (userData && userData.save === 'yes') {\r\n\r\n            dispatch({\r\n                type: RECOVERYKEY,\r\n                payload: userData,\r\n            });\r\n        }else{\r\n            alert('Error al registrar el usuario');\r\n        }\r\n        } catch (error) {\r\n            console.log(\"Error al enviar la información\", error.message);\r\n        }\r\n    };\r\n};\r\n\r\n\r\n\r\n\r\n//Loguear usuario\r\nexport const login_User = (dataquery)=>{\r\n    return async (dispatch) => {\r\n        try {\r\n            \r\n            const userData = {\r\n                \r\n                email:dataquery.emailOrPhone,\r\n                password:dataquery.password\r\n            }\r\n        \r\n            const params = new URLSearchParams(userData).toString();\r\n          \r\n            alert (\"Lo que tienen el username en el anme es \"+ userData.username )\r\n            \r\n            const endpoint = 'http://localhost:5000/users';\r\n            \r\n            \r\n            const response = await axios.get(`${endpoint}?${params}`);\r\n           \r\n           \r\n            const userDatauser=response[0]\r\n            console.log(\"lo que tengo de retorno \"+ userDatauser)\r\n            console.log(\"lo que tengo de retorno \"+ JSON.stringify(userDatauser))\r\n            //const userDatauser= {id, username, email, password, google_id, role_id }\r\n\r\n            dispatch({\r\n                        type:USERLOGIN,\r\n                        payload:userDatauser\r\n                 })\r\n        } catch (error) {\r\n            console.log(\"Error al enviar mensaje\", error.message);\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n//Loguear usuario\r\nexport const login_User_Google = (dataquery)=>{\r\n    return async (dispatch) => {\r\n        try {\r\n            const endpoint = 'http://localhost:3001/atleticos/recuperarkey';\r\n            \r\n            const response = await axios.post(endpoint, dataquery)\r\n\r\n\r\n            dispatch({\r\n                        type:USERLOGINGOOGLE,\r\n                        payload:response\r\n                 })\r\n        } catch (error) {\r\n            console.log(\"Error al enviar mensaje\", error.message);\r\n        }\r\n\r\n    }\r\n}\r\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,EAAEC,WAAW,EAAEC,SAAS,EAAEC,eAAe,QAAQ,gBAAgB;AACxG,OAAOC,KAAK,MAAM,OAAO;;AAGzB;AACA,OAAO,MAAMC,aAAa,GAAIC,SAAS,IAAK;EACxC,OAAO,MAAOC,QAAQ,IAAK;IACvB,IAAI;MACD;MACC,MAAMC,QAAQ,GAAG;QACGC,QAAQ,EAACH,SAAS,CAACG,QAAQ;QAC3BC,KAAK,EAACJ,SAAS,CAACI,KAAK;QACrBC,QAAQ,EAACL,SAAS,CAACK;MACvC,CAAC;MACH;MACE,MAAMC,QAAQ,GAAG,oCAAoC;MAErD,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAACF,QAAQ,EAAEJ,QAAQ,CAAC;MACrD,MAAM;QAACO,EAAE;QAAEN,QAAQ;QAAEC,KAAK;QAAEC,QAAQ;QAAEK,SAAS;QAAEC;MAAQ,CAAC,GAAEJ,QAAQ,CAACK,IAAI;;MAE1E;;MAIC,MAAMC,YAAY,GAAE;QAACJ,EAAE;QAAEN,QAAQ;QAAEC,KAAK;QAAEC,QAAQ;QAAEK,SAAS;QAAEC;MAAQ,CAAC;MACzE;MACCV,QAAQ,CAAC;QACLa,IAAI,EAAErB,YAAY;QAClBsB,OAAO,EAAEF;MACb,CAAC,CAAC;IAEN,CAAC,CAAC,OAAOG,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEF,KAAK,CAACG,OAAO,CAAC;IAChE;EACJ,CAAC;AACL,CAAC;;AAED;AACA,OAAO,MAAMC,iBAAiB,GAAIpB,SAAS,IAAK;EAC5C,OAAO,MAAOC,QAAQ,IAAK;IACvB,IAAI;MACA,MAAMK,QAAQ,GAAG,0CAA0C;MAC3D,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAACF,QAAQ,EAAEN,SAAS,CAAC;MACtD,MAAME,QAAQ,GAAGK,QAAQ,CAACK,IAAI;MAI9BK,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEG,IAAI,CAACC,SAAS,CAACpB,QAAQ,CAAC,CAAC;MAE1D,IAAIA,QAAQ,IAAIA,QAAQ,CAACqB,IAAI,KAAK,KAAK,EAAE;QAEzCtB,QAAQ,CAAC;UACLa,IAAI,EAAEpB,gBAAgB;UACtBqB,OAAO,EAAEb;QACb,CAAC,CAAC;MACN,CAAC,MAAI;QACDsB,KAAK,CAAC,+BAA+B,CAAC;MAC1C;IACA,CAAC,CAAC,OAAOR,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEF,KAAK,CAACG,OAAO,CAAC;IAChE;EACJ,CAAC;AACL,CAAC;;AAGD;;AAEA,OAAO,MAAMM,iBAAiB,GAAIzB,SAAS,IAAK;EAC5C,OAAO,MAAOC,QAAQ,IAAK;IACvB,IAAI;MACA,MAAMK,QAAQ,GAAG,0CAA0C;MAC3D,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAACF,QAAQ,EAAEN,SAAS,CAAC;MACtD,MAAME,QAAQ,GAAGK,QAAQ,CAACK,IAAI;MAI9BK,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEG,IAAI,CAACC,SAAS,CAACpB,QAAQ,CAAC,CAAC;MAE1D,IAAIA,QAAQ,IAAIA,QAAQ,CAACqB,IAAI,KAAK,KAAK,EAAE;QAEzCtB,QAAQ,CAAC;UACLa,IAAI,EAAEnB,WAAW;UACjBoB,OAAO,EAAEb;QACb,CAAC,CAAC;MACN,CAAC,MAAI;QACDsB,KAAK,CAAC,+BAA+B,CAAC;MAC1C;IACA,CAAC,CAAC,OAAOR,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEF,KAAK,CAACG,OAAO,CAAC;IAChE;EACJ,CAAC;AACL,CAAC;;AAKD;AACA,OAAO,MAAMO,UAAU,GAAI1B,SAAS,IAAG;EACnC,OAAO,MAAOC,QAAQ,IAAK;IACvB,IAAI;MAEA,MAAMC,QAAQ,GAAG;QAEbE,KAAK,EAACJ,SAAS,CAAC2B,YAAY;QAC5BtB,QAAQ,EAACL,SAAS,CAACK;MACvB,CAAC;MAED,MAAMuB,MAAM,GAAG,IAAIC,eAAe,CAAC3B,QAAQ,CAAC,CAAC4B,QAAQ,CAAC,CAAC;MAEvDN,KAAK,CAAE,0CAA0C,GAAEtB,QAAQ,CAACC,QAAS,CAAC;MAEtE,MAAMG,QAAQ,GAAG,6BAA6B;MAG9C,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACiC,GAAG,CAAC,GAAGzB,QAAQ,IAAIsB,MAAM,EAAE,CAAC;MAGzD,MAAMf,YAAY,GAACN,QAAQ,CAAC,CAAC,CAAC;MAC9BU,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAEL,YAAY,CAAC;MACrDI,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAEG,IAAI,CAACC,SAAS,CAACT,YAAY,CAAC,CAAC;MACrE;;MAEAZ,QAAQ,CAAC;QACGa,IAAI,EAAClB,SAAS;QACdmB,OAAO,EAACF;MACf,CAAC,CAAC;IACX,CAAC,CAAC,OAAOG,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,KAAK,CAACG,OAAO,CAAC;IACzD;EAEJ,CAAC;AACL,CAAC;;AAID;AACA,OAAO,MAAMa,iBAAiB,GAAIhC,SAAS,IAAG;EAC1C,OAAO,MAAOC,QAAQ,IAAK;IACvB,IAAI;MACA,MAAMK,QAAQ,GAAG,8CAA8C;MAE/D,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAACF,QAAQ,EAAEN,SAAS,CAAC;MAGtDC,QAAQ,CAAC;QACGa,IAAI,EAACjB,eAAe;QACpBkB,OAAO,EAACR;MACf,CAAC,CAAC;IACX,CAAC,CAAC,OAAOS,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,KAAK,CAACG,OAAO,CAAC;IACzD;EAEJ,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}